<h2>Admin - Add Game</h2>

<form id="gameForm">
  <input placeholder="Título" id="title"><br>
  <textarea placeholder="Descrição" id="description"></textarea><br>
  <button type="submit">Salvar</button>
</form>

<script>
async function login() {
  const res = await fetch('/api/login', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ username: 'admin', password: 'admin123' })
  });
  return (await res.json()).token;
}

document.getElementById('gameForm').onsubmit = async (e) => {
  e.preventDefault();

  const token = await login();

  await fetch('/admin/add-game', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': 'Bearer ' + token
    },
    body: JSON.stringify({
      title: title.value,
      description: description.value
    })
  });

  alert('Jogo salvo!');
};
</script>
